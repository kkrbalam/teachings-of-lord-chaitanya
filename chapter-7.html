<!-- Save as: index.html (GitHub Pages-ready)
     Light theme + raised cards + responsive multi-row wrap "relationship cards"
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>TLC Ch. 7 — Unlimited Forms of Godhead (Relationship Cards)</title>
    <style>
      :root{
        --bg:#f6f7fb;
        --panel:#ffffff;
        --card:#ffffff;
        --text:#111827;
        --muted:#4b5563;
        --border:rgba(17,24,39,.10);
        --accent:#2563eb;
        --accentSoft: rgba(37,99,235,.10);
        --green:#16a34a;
        --greenSoft: rgba(22,163,74,.10);
        --amber:#b45309;
        --amberSoft: rgba(180,83,9,.10);

        --shadow: 0 12px 30px rgba(17,24,39,.10);
        --shadow2: 0 3px 10px rgba(17,24,39,.08);
        --ring: 0 0 0 4px rgba(37,99,235,.14);
        --radius: 16px;
      }

      *{box-sizing:border-box}
      body{
        margin:0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
        background:
          radial-gradient(900px 480px at 20% 0%, rgba(37,99,235,.08), transparent 55%),
          radial-gradient(900px 480px at 80% 0%, rgba(22,163,74,.06), transparent 55%),
          var(--bg);
        color:var(--text);
      }

      header{
        position:sticky;
        top:0;
        z-index:50;
        padding:14px 14px 12px;
        background: rgba(246,247,251,.86);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
      }
      header .top{
        display:flex;
        align-items:flex-start;
        justify-content:space-between;
        gap:12px;
        flex-wrap:wrap;
      }
      header h1{
        margin:0;
        font-size:16px;
        font-weight:800;
        letter-spacing:.2px;
      }
      header p{
        margin:6px 0 0 0;
        color:var(--muted);
        font-size:13px;
        line-height:1.35;
        max-width: 78ch;
      }

      .toolbar{
        display:flex;
        gap:8px;
        align-items:center;
        flex-wrap:wrap;
      }
      .toolbar input[type="search"]{
        width:min(520px, 90vw);
        padding:10px 11px;
        border-radius: 14px;
        border:1px solid var(--border);
        background: #fff;
        color:var(--text);
        outline:none;
        font-size:13px;
        box-shadow: var(--shadow2);
      }
      .toolbar input[type="search"]:focus{
        border-color: rgba(37,99,235,.35);
        box-shadow: var(--ring), var(--shadow2);
      }

      .btn{
        padding:10px 11px;
        border-radius: 14px;
        border:1px solid var(--border);
        background: #fff;
        color:var(--text);
        cursor:pointer;
        font-size:13px;
        box-shadow: var(--shadow2);
      }
      .btn:hover{ background: #f9fafb; }
      .btn.primary{
        border-color: rgba(37,99,235,.30);
        background: var(--accentSoft);
        color: #0b2a6d;
      }
      .btn.primary:hover{ background: rgba(37,99,235,.14); }

      main{
        display:grid;
        grid-template-columns: 300px 1fr;
        gap: 14px;
        padding:14px;
        align-items:start;
      }

      /* Sidebar */
      nav{
        position:sticky;
        top:88px;
        background: var(--panel);
        border:1px solid var(--border);
        border-radius: var(--radius);
        padding: 12px;
        box-shadow: var(--shadow2);
      }
      nav .label{
        font-size:12px;
        color:var(--muted);
        font-weight:800;
        margin-bottom:8px;
      }
      nav a{
        display:block;
        padding:9px 10px;
        border-radius: 12px;
        color:var(--text);
        text-decoration:none;
        border:1px solid transparent;
        font-size:13px;
      }
      nav a:hover{
        background: #f3f4f6;
        border-color: var(--border);
      }
      .note{
        margin-top:10px;
        padding:10px;
        border: 1px solid rgba(180,83,9,.18);
        background: var(--amberSoft);
        border-radius: 14px;
        font-size:12px;
        color: var(--muted);
        line-height:1.4;
      }

      /* Sections + cards */
      section{
        background: rgba(255,255,255,.70);
        border: 1px solid var(--border);
        border-radius: calc(var(--radius) + 2px);
        padding: 12px;
        margin-bottom: 14px;
        box-shadow: var(--shadow2);
      }
      section h2{
        margin: 0 0 8px 0;
        font-size: 14px;
        font-weight: 850;
        letter-spacing:.2px;
      }
      section .sectionMeta{
        margin: 0 0 12px 0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.35;
        max-width: 95ch;
      }

      .grid{
        display:flex;
        flex-wrap:wrap; /* multi-row wrap */
        gap: 12px;
        align-items: stretch;
      }

      .card{
        flex: 1 1 330px;
        min-width: 290px;
        max-width: 560px;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 12px 12px;
        box-shadow: var(--shadow);
        position:relative;
        transition: transform .08s ease, box-shadow .08s ease;
      }
      .card:hover{
        transform: translateY(-1px);
        box-shadow: 0 14px 40px rgba(17,24,39,.14);
      }

      .cardHeader{
        display:flex;
        align-items:flex-start;
        justify-content:space-between;
        gap:10px;
      }
      .title{
        font-weight: 900;
        font-size: 13.75px;
        line-height: 1.25;
        margin: 0;
      }
      .summary{
        margin: 6px 0 10px 0;
        color:var(--muted);
        font-size: 13px;
        line-height: 1.35;
      }

      .chips{
        display:flex;
        flex-wrap:wrap;
        gap:6px;
        margin: 8px 0 0 0;
      }
      .chip{
        display:inline-flex;
        align-items:center;
        gap:6px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        color: var(--muted);
        font-size: 12px;
        cursor:pointer;
        user-select:none;
        box-shadow: 0 2px 8px rgba(17,24,39,.06);
      }
      .chip:hover{ background: #f9fafb; }
      .chip.tag{
        border-color: rgba(37,99,235,.20);
        background: rgba(37,99,235,.06);
        color: #1e3a8a;
      }
      .chip.rel{
        border-color: rgba(22,163,74,.20);
        background: rgba(22,163,74,.06);
        color: #14532d;
      }

      details{
        margin-top: 10px;
        border-top: 1px dashed rgba(17,24,39,.14);
        padding-top: 10px;
      }
      details summary{
        cursor:pointer;
        color: var(--accent);
        font-size: 13px;
        font-weight: 850;
        list-style: none;
      }
      details summary::-webkit-details-marker{ display:none; }
      .detailsBody{
        margin-top: 8px;
        color: var(--text);
        font-size: 13px;
        line-height: 1.45;
      }
      .detailsBody ul{
        margin: 6px 0 0 18px;
        padding:0;
      }
      .detailsBody li{ margin: 4px 0; color: var(--muted); }
      .detailsBody strong{ color: var(--text); }

      /* State */
      .hidden{ display:none !important; }
      .hit{
        border-color: rgba(37,99,235,.45) !important;
        box-shadow: var(--ring), var(--shadow) !important;
      }
      .focused{
        outline: 3px solid rgba(22,163,74,.35);
        outline-offset: 3px;
      }

      .activeFilters{
        margin-top: 6px;
        color: var(--muted);
        font-size: 12.5px;
      }

      @media (max-width: 980px){
        main{ grid-template-columns: 1fr; }
        nav{ position:relative; top:auto; }
        .card{ max-width: none; }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="top">
        <div>
          <h1>TLC Chapter 7 — Unlimited Forms of Godhead (relationship cards)</h1>
          <p>
            Grouped into clear hubs: <strong>naming systems</strong> → <strong>24 forms (4+12+8)</strong> → <strong>scriptures</strong> → <strong>avatāra framework</strong> →
            <strong>lists</strong> → <strong>cosmology & purpose</strong>.
            Use <strong>Details</strong> for depth and <strong>Related</strong> chips to jump.
          </p>
          <div class="activeFilters" id="activeFilters"></div>
        </div>
        <div class="toolbar">
          <input id="search" type="search" placeholder="Search (e.g., Keśava, 24, Siddhārtha, puruṣa, manvantara, Caitanya)..." />
          <button class="btn" id="expandAll">Open all details</button>
          <button class="btn" id="collapseAll">Close all details</button>
          <button class="btn primary" id="clearAll">Clear filters</button>
        </div>
      </div>
    </header>

    <main>
      <nav>
        <div class="label">Sections</div>
        <a href="#naming">1) Naming systems</a>
        <a href="#forms24">2) The 24 forms “architecture”</a>
        <a href="#scriptures">3) Scriptures & enumerations</a>
        <a href="#framework">4) Expansion/avatāra framework</a>
        <a href="#lists">5) Big lists</a>
        <a href="#cosmology">6) Cosmology, purpose, energies</a>
        <div class="note">
          Click a <strong>tag chip</strong> (e.g., <strong>#24-forms</strong>, <strong>#months</strong>, <strong>#SB 1.3</strong>) to filter cards.
          Click again to remove.
        </div>
      </nav>

      <div>
        <section id="naming">
          <h2>1) Naming systems</h2>
          <p class="sectionMeta">
            Two “indexing” systems reuse the same 12 names: the Vaiṣṇava month names and body tilaka naming.
          </p>
          <div class="grid" id="sec-naming"></div>
        </section>

        <section id="forms24">
          <h2>2) The 24 forms (4 + 12 + 8)</h2>
          <p class="sectionMeta">
            The chapter’s central structure: 24 forms are categorized and mapped; identification is by symbol positions (mace/disc/lotus/conch).
          </p>
          <div class="grid" id="sec-forms24"></div>
        </section>

        <section id="scriptures">
          <h2>3) Scriptures & enumerations</h2>
          <p class="sectionMeta">
            Siddhārtha-saṁhitā explains symbol-order and sequences; Hayaśīrṣa Pañcarātra describes 16 forms, a key conclusion about original Kṛṣṇa,
            and the 9 protectors of Mathurā/Dvārakā Purīs.
          </p>
          <div class="grid" id="sec-scriptures"></div>
        </section>

        <section id="framework">
          <h2>4) Expansion/avatāra framework</h2>
          <p class="sectionMeta">
            Svāṁśa divisions (Saṅkarṣaṇa division vs incarnation division) and the 6 avatāra categories.
          </p>
          <div class="grid" id="sec-framework"></div>
        </section>

        <section id="lists">
          <h2>5) Big lists</h2>
          <p class="sectionMeta">
            SB $1.3$ list of 25 līlā-avatāras plus classifications; 14 manvantara-avatāras; 4 yuga-avatāras; śaktyāveśa examples; and guṇa-avatāras.
          </p>
          <div class="grid" id="sec-lists"></div>
        </section>

        <section id="cosmology">
          <h2>6) Cosmology, purpose, and energies</h2>
          <p class="sectionMeta">
            Kṛṣṇaloka structure, earth locations, distribution for devotees, purposes, and the thinking/feeling/acting energy model with Brahma-saṁhitā $5.2$ and the iron/fire analogy.
          </p>
          <div class="grid" id="sec-cosmology"></div>
        </section>
      </div>
    </main>

    <script>
      const CARDS = [
        // Naming systems
        {
          section: "naming",
          id: "months12",
          title: "12 months ↔ 12 Vaikuṇṭha forms (predominating Deities)",
          summary: "Each month is named after one Vaikuṇṭha form, starting with Mārgaśīrṣa = Keśava.",
          tags: ["months", "12-names", "vaikuntha-forms"],
          related: ["tilaka12", "forms24-hub", "keśava-earth"],
          detailsHTML: `
            <ul>
              <li><strong>Mārgaśīrṣa</strong> (late Nov–early Dec): <strong>Keśava</strong></li>
              <li>Dec–Jan: <strong>Nārāyaṇa</strong></li>
              <li>Jan–Feb: <strong>Mādhava</strong></li>
              <li>Feb–Mar: <strong>Govinda</strong></li>
              <li>Mar–Apr: <strong>Viṣṇu</strong></li>
              <li>Apr–May: <strong>Śrī Madhusūdana</strong></li>
              <li>May–Jun: <strong>Trivikrama</strong></li>
              <li>Jun–Jul: <strong>Vāmana</strong></li>
              <li>Jul–Aug: <strong>Śrīdhara</strong></li>
              <li>Aug–Sep: <strong>Hṛṣīkeśa</strong></li>
              <li>Sep–Oct: <strong>Padmanābha</strong></li>
              <li>Oct–Nov: <strong>Dāmodara</strong> (month-Deity; distinct from Vraja Dāmodara)</li>
            </ul>
          `
        },
        {
          section: "naming",
          id: "tilaka12",
          title: "Body tilaka uses the same 12 names",
          summary: "Forehead tilaka is Keśava; other body parts are named with the remaining 11 names.",
          tags: ["tilaka", "12-names", "practice"],
          related: ["months12", "forms24-hub"],
          detailsHTML: `
            <ul>
              <li>Forehead: <strong>Keśava</strong></li>
              <li>Stomach/chest/arms etc.: the remaining names</li>
              <li>Same set as the month names</li>
            </ul>
          `
        },

        // 24 forms architecture
        {
          section: "forms24",
          id: "forms24-hub",
          title: "24 forms of Viṣṇu = 4 + 12 + 8 (vilāsa manifestations)",
          summary: "The chapter’s central structure: 24 forms are composed and named by hand-symbol positions.",
          tags: ["24-forms", "vilasa", "structure"],
          related: ["forms24-4", "forms24-12", "forms24-8", "symbols4", "vaibhava-examples", "siddhartha-order"],
          detailsHTML: `
            <ul>
              <li><strong>4</strong> original Viṣṇu forms (prābhava-vilāsa)</li>
              <li><strong>12</strong> Vaikuṇṭha forms (months/tilaka)</li>
              <li><strong>8</strong> additional vilāsa-mūrtis expanded from the four</li>
              <li>All have Vaikuṇṭha planets; some appear in the material world</li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "symbols4",
          title: "The 4 symbols (used to distinguish the forms)",
          summary: "mace/club (gadā), disc (cakra), lotus (padma), conch (śaṅkha).",
          tags: ["24-forms", "symbols"],
          related: ["siddhartha-order", "siddhartha-4", "siddhartha-20"],
          detailsHTML: `
            <ul>
              <li>mace/club: <strong>gadā</strong></li>
              <li>disc: <strong>cakra</strong></li>
              <li>lotus: <strong>padma</strong></li>
              <li>conch: <strong>śaṅkha</strong></li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "forms24-4",
          title: "The 4 original Viṣṇu forms",
          summary: "Vāsudeva, Saṅkarṣaṇa, Pradyumna, Aniruddha (prābhava-vilāsa).",
          tags: ["24-forms", "4-original", "vilasa"],
          related: ["forms24-hub", "forms24-8-map", "energies3"],
          detailsHTML: `
            <ul>
              <li><strong>Vāsudeva</strong></li>
              <li><strong>Saṅkarṣaṇa</strong></li>
              <li><strong>Pradyumna</strong></li>
              <li><strong>Aniruddha</strong></li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "forms24-12",
          title: "The 12 Vaikuṇṭha names (used for months/tilaka)",
          summary: "Keśava…Dāmodara (the chapter’s 12-name set).",
          tags: ["24-forms", "12-names", "months"],
          related: ["months12", "tilaka12", "siddhartha-20"],
          detailsHTML: `
            <ul>
              <li>Keśava, Nārāyaṇa, Mādhava, Govinda</li>
              <li>Viṣṇu, Madhusūdana, Trivikrama, Vāmana</li>
              <li>Śrīdhara, Hṛṣīkeśa, Padmanābha, Dāmodara</li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "forms24-8",
          title: "8 additional vilāsa-mūrtis",
          summary: "Puruṣottama, Acyuta, Nṛsiṁha, Janārdana, Hari, Kṛṣṇa (non-original), Adhokṣaja, Upendra.",
          tags: ["24-forms", "8-vilasa", "vilasa"],
          related: ["forms24-8-map", "forms24-hub"],
          detailsHTML: `
            <ul>
              <li>Puruṣottama, Acyuta, Nṛsiṁha, Janārdana</li>
              <li>Hari, Kṛṣṇa (non-original), Adhokṣaja, Upendra</li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "forms24-8-map",
          title: "Mapping: which 8 are vilāsa forms of which of the 4",
          summary: "Each pair is stated as a vilāsa of one original form.",
          tags: ["24-forms", "mapping", "vilasa"],
          related: ["forms24-4", "forms24-8"],
          detailsHTML: `
            <ul>
              <li>From <strong>Vāsudeva</strong> → Adhokṣaja, Puruṣottama</li>
              <li>From <strong>Saṅkarṣaṇa</strong> → Upendra, Acyuta</li>
              <li>From <strong>Pradyumna</strong> → Nṛsiṁha, Janārdana</li>
              <li>From <strong>Aniruddha</strong> → Hari, Kṛṣṇa (non-original)</li>
            </ul>
          `
        },
        {
          section: "forms24",
          id: "vaibhava-examples",
          title: "Vaibhava examples among the 24",
          summary: "Some of the 24 are vaibhava forms (different features): Pradyumna, Trivikrama, Vāmana, Hari, Kṛṣṇa (non-original).",
          tags: ["24-forms", "vaibhava"],
          related: ["forms24-hub", "forms24-12", "forms24-8"],
          detailsHTML: `
            <ul>
              <li>Pradyumna</li>
              <li>Trivikrama</li>
              <li>Vāmana</li>
              <li>Hari</li>
              <li>Kṛṣṇa (non-original)</li>
            </ul>
          `
        },

        // Scriptures
        {
          section: "scriptures",
          id: "siddhartha-order",
          title: "Siddhārtha-saṁhitā: reading order for hand-symbol positions",
          summary: "Lower right → upper right → upper left → lower left.",
          tags: ["Siddhartha", "symbols", "24-forms"],
          related: ["symbols4", "siddhartha-4", "siddhartha-20"],
          detailsHTML: `
            <ul>
              <li>Start: lower right</li>
              <li>Then: upper right</li>
              <li>Then: upper left</li>
              <li>Finally: lower left</li>
            </ul>
          `
        },
        {
          section: "scriptures",
          id: "siddhartha-4",
          title: "Siddhārtha-saṁhitā: symbol sequences for the 4 originals",
          summary: "Explicit sequences for Vāsudeva, Saṅkarṣaṇa, Pradyumna, Aniruddha.",
          tags: ["Siddhartha", "24-forms", "4-original"],
          related: ["siddhartha-order", "forms24-4"],
          detailsHTML: `
            <ul>
              <li><strong>Vāsudeva</strong>: club, conch, disc, lotus</li>
              <li><strong>Saṅkarṣaṇa</strong>: club, conch, lotus, disc</li>
              <li><strong>Pradyumna</strong>: disc, conch, club, lotus</li>
              <li><strong>Aniruddha</strong>: disc, club, conch, lotus</li>
            </ul>
          `
        },
        {
          section: "scriptures",
          id: "siddhartha-20",
          title: "Siddhārtha-saṁhitā: 20 Nārāyaṇa-feature forms (symbol sequences)",
          summary: "The chapter lists 20 forms with their symbol positions.",
          tags: ["Siddhartha", "24-forms", "Narayana-feature"],
          related: ["forms24-12", "forms24-8"],
          detailsHTML: `
            <ul>
              <li>Śrī Keśava: lotus, conch, disc, club</li>
              <li>Nārāyaṇa: conch, lotus, club, disc</li>
              <li>Śrī Mādhava: club, disc, conch, lotus</li>
              <li>Śrī Govinda: disc, club, lotus, conch</li>
              <li>Viṣṇu-mūrti: club, lotus, conch, disc</li>
              <li>Madhusūdana: disc, conch, lotus, club</li>
              <li>Trivikrama: lotus, club, disc, conch</li>
              <li>Śrī Vāmana: conch, disc, club, lotus</li>
              <li>Śrīdhara: lotus, disc, club, conch</li>
              <li>Hṛṣīkeśa: club, disc, lotus, conch</li>
              <li>Padmanābha: conch, lotus, disc, club</li>
              <li>Dāmodara: lotus, disc, club, conch</li>
              <li>Puruṣottama: disc, lotus, conch, club</li>
              <li>Acyuta: club, lotus, disc, conch</li>
              <li>Nṛsiṁha: disc, lotus, club, conch</li>
              <li>Janārdana: lotus, disc, conch, club</li>
              <li>Śrī Hari: conch, disc, lotus, club</li>
              <li>Śrī Kṛṣṇa: conch, club, lotus, disc</li>
              <li>Adhokṣaja: lotus, club, conch, disc</li>
              <li>Upendra: conch, club, disc, lotus</li>
            </ul>
          `
        },
        {
          section: "scriptures",
          id: "hayasirsa16",
          title: "Hayaśīrṣa Pañcarātra: 16 forms + key conclusion",
          summary: "Mentions 16 forms and concludes original Supreme Personality is Kṛṣṇa (līlā-puruṣottama; in Vṛndāvana as Nanda’s son).",
          tags: ["Hayasirsa", "conclusion", "Krsna-original"],
          related: ["hayasirsa9", "svamsa-divisions"],
          detailsHTML: `
            <ul>
              <li><strong>16</strong> forms described (named by disc etc. positions)</li>
              <li>Conclusion: Supreme Original Personality is <strong>Kṛṣṇa</strong></li>
              <li>Kṛṣṇa is called <strong>līlā-puruṣottama</strong></li>
              <li>He resides principally in <strong>Vṛndāvana</strong> as the <strong>son of Nanda</strong></li>
            </ul>
          `
        },
        {
          section: "scriptures",
          id: "hayasirsa9",
          title: "Hayaśīrṣa Pañcarātra: 9 protectors of Mathurā/Dvārakā Purīs",
          summary: "Nine forms protect the two Purīs; described as prakāśa/vilāsa manifestations of Kṛṣṇa.",
          tags: ["Hayasirsa", "protectors", "prakasa-vilasa"],
          related: ["hayasirsa16", "forms24-4", "guna3"],
          detailsHTML: `
            <ul>
              <li>Vāsudeva, Saṅkarṣaṇa, Pradyumna, Aniruddha</li>
              <li>Nārāyaṇa, Nṛsiṁha, Hayagrīva, Varāha, Brahmā</li>
            </ul>
          `
        },

        // Framework
        {
          section: "framework",
          id: "svamsa-divisions",
          title: "Svāṁśa: Saṅkarṣaṇa division vs incarnation division",
          summary: "Saṅkarṣaṇa division includes the 3 puruṣa-avatāras; incarnation division includes līlā-avatāras (fish/tortoise examples).",
          tags: ["svamsa", "framework"],
          related: ["purusa3", "six-avatara-types", "sb13-list"],
          detailsHTML: `
            <ul>
              <li><strong>Saṅkarṣaṇa division</strong> → puruṣa-avatāras</li>
              <li><strong>Incarnation division</strong> → līlā-avatāras (Matsya, Kūrma, etc.)</li>
            </ul>
          `
        },
        {
          section: "framework",
          id: "purusa3",
          title: "Three puruṣa-avatāras (first incarnations; Sātvata-tantra)",
          summary: "Mahā-Viṣṇu/Kāraṇodakaśāyī, Garbhodakaśāyī, Kṣīrodakaśāyī.",
          tags: ["puruṣa", "avatara-types"],
          related: ["svamsa-divisions", "energies3"],
          detailsHTML: `
            <ul>
              <li>Mahā-Viṣṇu / <strong>Kāraṇodaka-śāyī</strong></li>
              <li><strong>Garbhodaka-śāyī</strong></li>
              <li><strong>Kṣīrodaka-śāyī</strong></li>
            </ul>
          `
        },
        {
          section: "framework",
          id: "six-avatara-types",
          title: "Six kinds of incarnations (avatāras)",
          summary: "puruṣa, līlā, guṇa, manvantara, yuga, śaktyāveśa.",
          tags: ["avatara-types", "framework"],
          related: ["guna3", "manvantara14", "yuga4", "saktyavesa8"],
          detailsHTML: `
            <ul>
              <li>puruṣa-avatāras</li>
              <li>līlā-avatāras</li>
              <li>guṇa-avatāras</li>
              <li>manvantara-avatāras</li>
              <li>yuga-avatāras</li>
              <li>śaktyāveśa-avatāras</li>
            </ul>
          `
        },

        // Lists
        {
          section: "lists",
          id: "sb13-list",
          title: "Śrīmad-Bhāgavatam 1.3: 25 līlā-avatāras (kalpa-avatāras)",
          summary: "List of 25 plus classifications: not permanent (Haṁsa, Mohinī), five eternal (Kapila etc.), vaibhava notes, and guṇa-avatāras.",
          tags: ["SB 1.3", "lila", "lists"],
          related: ["guna3", "manvantara14", "saktyavesa8"],
          detailsHTML: `
            <ul>
              <li>1) Kumāras (Catuḥsana)</li>
              <li>2) Nārada</li>
              <li>3) Varāha</li>
              <li>4) Matsya</li>
              <li>5) Yajña</li>
              <li>6) Nara-Nārāyaṇa</li>
              <li>7) Kārdami Kapila</li>
              <li>8) Dattātreya</li>
              <li>9) Hayaśīrṣa</li>
              <li>10) Haṁsa</li>
              <li>11) Dhruvapriya / Pṛśnigarbha</li>
              <li>12) Ṛṣabha</li>
              <li>13) Pṛthu</li>
              <li>14) Nṛsiṁha</li>
              <li>15) Kūrma</li>
              <li>16) Dhanvantari</li>
              <li>17) Mohinī</li>
              <li>18) Vāmana</li>
              <li>19) Bhārgava (Paraśurāma)</li>
              <li>20) Rāghavendra</li>
              <li>21) Vyāsa</li>
              <li>22) Pralambāri Balarāma</li>
              <li>23) Kṛṣṇa</li>
              <li>24) Buddha</li>
              <li>25) Kalki</li>
            </ul>
          `
        },
        {
          section: "lists",
          id: "guna3",
          title: "Guṇa-avatāras (3)",
          summary: "Brahmā, Viṣṇu, Śiva.",
          tags: ["guṇa", "avatara-types", "lists"],
          related: ["six-avatara-types"],
          detailsHTML: `<ul><li>Brahmā</li><li>Viṣṇu</li><li>Śiva</li></ul>`
        },
        {
          section: "lists",
          id: "manvantara14",
          title: "Manvantara-avatāras (14) — also called vaibhava-avatāras",
          summary: "List of 14; note: Yajña and Vāmana are also līlā-avatāras.",
          tags: ["manvantara", "avatara-types", "lists"],
          related: ["six-avatara-types", "sb13-list"],
          detailsHTML: `
            <ul>
              <li>Yajña, Vibhu, Satyasena, Hari, Vaikuṇṭha, Ajita, Vāmana</li>
              <li>Sārvabhauma, Ṛṣabha, Viṣvaksena, Dharmasetu, Sudhāmā, Yogeśvara, Bṛhadbhānu</li>
              <li><strong>Overlap:</strong> Yajña and Vāmana are also līlā-avatāras</li>
            </ul>
          `
        },
        {
          section: "lists",
          id: "yuga4",
          title: "Yuga-avatāras (4) — colors by yuga",
          summary: "Satya white; Tretā red; Dvāpara blackish; Kali blackish; special Kali yellowish (Caitanya).",
          tags: ["yuga", "avatara-types", "lists"],
          related: ["six-avatara-types", "caitanya"],
          detailsHTML: `
            <ul>
              <li>Satya-yuga: white</li>
              <li>Tretā-yuga: red</li>
              <li>Dvāpara-yuga: blackish</li>
              <li>Kali-yuga: blackish</li>
              <li>Special Kali-yuga: yellowish (Caitanya Mahāprabhu)</li>
            </ul>
          `
        },
        {
          section: "lists",
          id: "saktyavesa8",
          title: "Śaktyāveśa-avatāras — examples listed",
          summary: "Kapila, Ṛṣabha, Ananta, Brahmā, Kumāras, Nārada, King Pṛthu, Paraśurāma.",
          tags: ["śaktyāveśa", "avatara-types", "lists"],
          related: ["six-avatara-types"],
          detailsHTML: `
            <ul>
              <li>Kapila</li>
              <li>Ṛṣabha</li>
              <li>Ananta</li>
              <li>Brahmā (sometimes the Lord Himself becomes Brahmā)</li>
              <li>Catuḥsana / Kumāras (knowledge)</li>
              <li>Nārada (devotional service)</li>
              <li>King Pṛthu (administrative power)</li>
              <li>Paraśurāma (subdues evil principles)</li>
            </ul>
          `
        },

        // Cosmology / purpose / energies
        {
          section: "cosmology",
          id: "krishnaloka",
          title: "Spiritual sky: Kṛṣṇaloka (topmost) → Gokula/Mathurā/Dvārakā",
          summary: "Kṛṣṇaloka is topmost; Mathurā portion has Keśava always situated; Nārāyaṇa-feature planets are eternal.",
          tags: ["cosmology", "Krsnaloka"],
          related: ["keśava-earth", "distribution-purpose"],
          detailsHTML: `
            <ul>
              <li>Kṛṣṇaloka divided into: <strong>Gokula</strong>, <strong>Mathurā</strong>, <strong>Dvārakā</strong></li>
              <li>Mathurā portion: <strong>Keśava</strong> always situated</li>
              <li>All Nārāyaṇa-feature planets are eternal</li>
            </ul>
          `
        },
        {
          section: "cosmology",
          id: "keśava-earth",
          title: "Earthly installed forms (examples)",
          summary: "Keśava in Mathurā; Puruṣottama in Jagannātha Purī; Viṣṇu in Ānandāraṇya; Hari in Māyāpur.",
          tags: ["places", "earth-forms", "cosmology"],
          related: ["krishnaloka", "months12", "forms24-8"],
          detailsHTML: `
            <ul>
              <li>Keśava mūrti in <strong>Mathurā</strong> (India)</li>
              <li>Puruṣottama in <strong>Jagannātha Purī</strong> (Orissa)</li>
              <li>Viṣṇu in <strong>Ānandāraṇya</strong></li>
              <li>Hari in <strong>Māyāpur</strong> (Lord Caitanya’s birthplace)</li>
              <li>Many other forms also situated on earth</li>
            </ul>
          `
        },
        {
          section: "cosmology",
          id: "distribution-purpose",
          title: "Distribution across universes + purpose",
          summary: "Forms exist across universes; earth described as seven islands; purpose is to please devotees worldwide and reestablish devotional service.",
          tags: ["distribution", "purpose", "devotees"],
          related: ["scriptural-incarnations", "forms24-hub"],
          detailsHTML: `
            <ul>
              <li>Forms distributed throughout the world and throughout the universes</li>
              <li>Earth described as <strong>seven islands</strong> (seven continents)</li>
              <li>At present known only in India; other locations not currently known</li>
              <li>Purpose: pleasure to devotees; reestablish devotional service; other divine activities</li>
            </ul>
          `
        },
        {
          section: "cosmology",
          id: "scriptural-incarnations",
          title: "Incarnation examples explicitly pointed out",
          summary: "Viṣṇu, Trivikrama, Nṛsiṁha, Vāmana.",
          tags: ["examples", "purpose"],
          related: ["distribution-purpose", "sb13-list"],
          detailsHTML: `<ul><li>Viṣṇu</li><li>Trivikrama</li><li>Nṛsiṁha</li><li>Vāmana</li></ul>`
        },
        {
          section: "cosmology",
          id: "energies3",
          title: "Thinking / feeling / acting energies → forms",
          summary: "Thinking → Supreme Lord; feeling → Vāsudeva; acting → Saṅkarṣaṇa Balarāma; creation depends on these.",
          tags: ["energies", "Vasudeva", "Sankarshana"],
          related: ["forms24-4", "spiritual-vs-material", "purusa3"],
          detailsHTML: `
            <ul>
              <li>Thinking energy → Supreme Lord</li>
              <li>Feeling energy → <strong>Vāsudeva</strong></li>
              <li>Acting energy → <strong>Saṅkarṣaṇa Balarāma</strong></li>
              <li>Both spiritual and material worlds relate to acting energy</li>
            </ul>
          `
        },
        {
          section: "cosmology",
          id: "spiritual-vs-material",
          title: "Brahma-saṁhitā $5.2$ + māyā + superintendence (iron/fire analogy)",
          summary: "Goloka lotus; Ananta manifests everything; material nature is not ultimate cause—creation requires the Lord’s superintendence via Saṅkarṣaṇa.",
          tags: ["Brahma-samhita", "māyā", "superintendence"],
          related: ["energies3"],
          detailsHTML: `
            <ul>
              <li>Brahma-saṁhitā $5.2$: Goloka like a lotus; manifested by <strong>Ananta</strong> (form of Balarāma/Saṅkarṣaṇa)</li>
              <li>Material cosmos manifests through <strong>māyā</strong>, but material nature is not the ultimate cause</li>
              <li>Superintendent form: <strong>Saṅkarṣaṇa</strong></li>
              <li>Analogy: iron heated by fire becomes red-hot and acts like fire</li>
            </ul>
          `
        },
        {
          section: "cosmology",
          id: "caitanya",
          title: "Special Kali-yuga: yellowish (Caitanya Mahāprabhu)",
          summary: "Kali-yuga is generally blackish, but sometimes yellowish in a special Kali-yuga (Caitanya).",
          tags: ["Caitanya", "yuga"],
          related: ["yuga4", "keśava-earth"],
          detailsHTML: `<ul><li>Special Kali-yuga: <strong>yellowish</strong> (Caitanya Mahāprabhu)</li></ul>`
        }
      ];

      const bySection = {
        naming: document.getElementById("sec-naming"),
        forms24: document.getElementById("sec-forms24"),
        scriptures: document.getElementById("sec-scriptures"),
        framework: document.getElementById("sec-framework"),
        lists: document.getElementById("sec-lists"),
        cosmology: document.getElementById("sec-cosmology"),
      };

      const state = { q: "", tagFilters: new Set() };

      const normalize = (s) => (s || "").toString().toLowerCase();
      const stripHTML = (html) => {
        const d = document.createElement("div");
        d.innerHTML = html || "";
        return d.textContent || d.innerText || "";
      };
      function cardText(c) {
        return normalize([c.title, c.summary, (c.tags || []).join(" "), stripHTML(c.detailsHTML)].join(" "));
      }

      function toggleTag(tag) {
        if (state.tagFilters.has(tag)) state.tagFilters.delete(tag);
        else state.tagFilters.add(tag);
        applyFilters();
        reflectActiveFilters();
      }

      function jumpTo(id) {
        const target = document.getElementById(id);
        if (!target) return;
        target.scrollIntoView({ behavior: "smooth", block: "center" });
        const details = target.querySelector("details");
        if (details) details.open = true;
        target.classList.add("focused");
        setTimeout(() => target.classList.remove("focused"), 1600);
      }

      function makeChip(text, cls, onClick) {
        const b = document.createElement("button");
        b.type = "button";
        b.className = `chip ${cls}`;
        b.textContent = text;
        b.addEventListener("click", (e) => {
          e.stopPropagation();
          onClick?.();
        });
        return b;
      }

      function renderCard(c) {
        const card = document.createElement("div");
        card.className = "card";
        card.id = c.id;
        card.dataset.text = cardText(c);

        const title = document.createElement("div");
        title.className = "title";
        title.textContent = c.title;

        const summary = document.createElement("div");
        summary.className = "summary";
        summary.textContent = c.summary || "";

        const chips = document.createElement("div");
        chips.className = "chips";

        (c.tags || []).forEach(t => chips.appendChild(makeChip(`#${t}`, "tag", () => toggleTag(t))));

        if (c.related?.length) {
          c.related.forEach(rid => {
            // Make related chips readable by using the related card title if found
            const relCard = CARDS.find(x => x.id === rid);
            const label = relCard ? `Related: ${relCard.title}` : `Related: ${rid}`;
            chips.appendChild(makeChip(label, "rel", () => jumpTo(rid)));
          });
        }

        const details = document.createElement("details");
        const summaryEl = document.createElement("summary");
        summaryEl.textContent = "Details";
        const body = document.createElement("div");
        body.className = "detailsBody";
        body.innerHTML = c.detailsHTML || "";
        details.appendChild(summaryEl);
        details.appendChild(body);

        card.appendChild(title);
        card.appendChild(summary);
        if (chips.childElementCount) card.appendChild(chips);
        card.appendChild(details);

        return card;
      }

      function renderAll() {
        Object.values(bySection).forEach(el => el.innerHTML = "");
        CARDS.forEach(c => bySection[c.section].appendChild(renderCard(c)));
        applyFilters();
        reflectActiveFilters();
      }

      function applyFilters() {
        const q = normalize(state.q).trim();
        const tags = state.tagFilters;

        document.querySelectorAll(".card").forEach(card => {
          card.classList.remove("hit");
          const text = card.dataset.text || "";

          const matchesQ = !q || text.includes(q);

          let matchesTags = true;
          if (tags.size) {
            const own = new Set();
            card.querySelectorAll(".chip.tag").forEach(ch => own.add(ch.textContent.replace(/^#/, "")));
            for (const t of tags) {
              if (!own.has(t)) { matchesTags = false; break; }
            }
          }

          const show = matchesQ && matchesTags;
          card.classList.toggle("hidden", !show);
          if (show && q && text.includes(q)) card.classList.add("hit");
        });
      }

      function reflectActiveFilters() {
        const el = document.getElementById("activeFilters");
        const parts = [];
        if (state.q.trim()) parts.push(`Search: “${state.q.trim()}”`);
        if (state.tagFilters.size) parts.push(`Tags: ${Array.from(state.tagFilters).map(t => `#${t}`).join(", ")}`);
        el.textContent = parts.length ? `Active filters — ${parts.join(" | ")}` : "";
      }

      document.getElementById("expandAll").addEventListener("click", () => {
        document.querySelectorAll("details").forEach(d => d.open = true);
      });
      document.getElementById("collapseAll").addEventListener("click", () => {
        document.querySelectorAll("details").forEach(d => d.open = false);
      });
      document.getElementById("clearAll").addEventListener("click", () => {
        state.q = "";
        state.tagFilters.clear();
        document.getElementById("search").value = "";
        applyFilters();
        reflectActiveFilters();
      });

      document.getElementById("search").addEventListener("input", (e) => {
        state.q = e.target.value || "";
        applyFilters();
        reflectActiveFilters();
      });

      renderAll();
    </script>
  </body>
</html>
